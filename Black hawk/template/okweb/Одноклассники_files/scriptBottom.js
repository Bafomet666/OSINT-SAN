(function(){if(OK.util.isIEMetro()){document.documentElement.classList.add("ie-metro");}})();OK.customJs=(function(){var l=function(x,t,w,s){var u=$("#"+s);var v=$("#"+w);var r=u.find(".rel").find(":checkbox");$("#"+x+"_"+t).change(function(){if(this.checked){u.addClass("scm_cnt__rel");v.click();}else{r.prop("checked",false).prop("disabled",false);}});$("#"+x+"_back").click(function(){u.removeClass("scm_cnt__rel");v.click();});u.delegate(":checkbox","change",function(z){var y=$(z.currentTarget).data("mutex").split(",");if(y.length){$("#"+y.join(",#")).prop("disabled",z.currentTarget.checked);}});v.on("close.sm",function(y){var B=$(y.target);var A=B.data("rels");var z=B.find(":checkbox:checked").map(function(){return this.value;}).get().sort().join(";");if(A!=z){$.post($(y.currentTarget).data("url"),{"gwt.requested":window.pageCtx.gwtHash,"st.rels":z,"st.orels":A});B.data("rels",z);}});};var d=function(y,s,t,v){var r=$("#"+y);var x=$("#"+v);var w=$("#"+y+"_counter");var u=function(B){var C=r.attr("contenteditable")==="true"?r.html():r.val();var z=s-C.length;var A=z>=0;x.toggleClass("__txt-counter-active",A);x.toggleClass("__txt-counter-err",!A);if(z<t){w.show();}else{w.hide();return;}w.html(z.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1&nbsp;"));};r.bind("input paste change keypress keydown keyup focus",u);u();};var p=function(x,v,y){var z=$("#"+x);if(!z){return;}var t=parseInt(z.attr("maxlength"));if(isNaN(t)){return;}var u=parseInt(z.attr("showremaining"));if(isNaN(u)){u=50;}var D=$("#"+v);var A=$("#"+x+"_text");var C=13;var r=46;var w="__txt-counter-err";var s="form_i__error";if(D&&A){var B=function(H){var G=z.val();var F=t-G.length;if(F<0){z.val(G.substring(0,t));F=0;}D.toggleClass(w,!F);if(F>u){A.html("&nbsp;");return true;}var E=OK.util.plurals(F);D.removeClass(s);A.html(y[E]+" "+F+" "+y[E+6]);if(F==0){if(H&&H.type!=undefined&&H.type=="keypress"&&(H.keyCode==C||H.keyCode>=33&&H.keyCode<=36||H.keyCode>=41&&H.keyCode!=r)){return false;}}return true;};z.keypress(B);z.keyup(B);z.change(B);z.bind("input paste",B);if(!D.hasClass(s)){A.html("&nbsp;");}B();}};var q=function(t,v){var r=document.getElementById(t);var u=document.getElementById(v);if(!r||!u){return;}var s=function(){if(!u.checked&&!r.disabled){if(r.className.indexOf("button-pro")!=-1){r.className=r.className+" __disabled";}r.disabled=true;}else{if(u.checked&&r.disabled){if(r.className.indexOf("button-pro")!=-1){r.className=r.className.replace(/__disabled/g,"");}r.disabled=false;}}};u.onchange=s;s();};var m=function(s,w){var r=document.getElementById(s);var v=document.getElementById(w);if(!r||!v){return;}var u=0;var t=function(){if(v.checked&&!r.disabled){u=r.selectedIndex;r.options[r.length]=new Option("","");r.selectedIndex=r.options.length-1;r.disabled=true;}else{if(!v.checked&&r.disabled){r.options[r.length-1]=null;r.selectedIndex=u;r.disabled=false;}}};v.onchange=t;t();};var c=(function(){var r=function(w,x,s){try{var v=$("#"+x);var t=$("#"+w);if(!v||!t){return;}t.hide();setTimeout(function(){v.hide();t.show();},s);}catch(u){}};return{showNotificationOnActionMenu:r};}());var e=function(u,r){try{var t=$("#"+u);if(!t){return;}setTimeout(function(){t.hide();},r);}catch(s){}};var n=function(A,y){var t=$("#"+A);var z=$(t).find("input:file");var x=z.length;if(y<=x){return;}for(var u=0;u<x;u++){var v=z[u].value;if(v!=null&&v===""){return;}}var B=$(z[x-1]);var s=(B.attr("id")||"").replace(/\d+$/,"");var r=(B.attr("name")||"").replace(/\d+$/,"");var w=B.attr("style");$('<input type="file" />').attr({id:s+x,name:r+x,style:w}).change(function(){n(A,y);}).appendTo(t);};var g=(function(){var v=[],u=function(w){require(["jquery.ui.datepicker"],r.bind(null,w));},r=function(x){if(!s(x)){var D=$(x);D.datepicker();var w=D.datepicker("option","dateFormat");var A=D.attr("min-date");var C=D.attr("max-date");var B=D.attr("alt-input");var y=D.attr("on-click-submit");var z="";if(A){A=$.datepicker.parseDate(w,A);D.datepicker("option","minDate",A);z+=A.getFullYear();}else{z+="c-10";}z+=":";if(C){C=$.datepicker.parseDate(w,C);D.datepicker("option","maxDate",C);z+=C.getFullYear();}else{z+="c+10";}if(B){D.datepicker("option","altField",document.getElementById(B));}if(y){D.datepicker("option","onSelect",function(){$(".js-charts_list").css("opacity","0.3");D.closest("form").submit();});}D.datepicker("option","yearRange",z);D.datepicker("show");}},s=function(w){var x=t(w);if(v[x]){return true;}v[x]=true;return false;},t=function(w){var y=$(w);var x=y.attr("jqInputId");if(!x){x="datepicker"+Math.random();y.attr("jqInputId",x);}return x;};return{init:u};}());var j={selectAll:function(t,s){var u=document.getElementById(t).getElementsByTagName("input");for(var r=1;r<u.length;r++){u[r].checked=s;}},submitForm:function(u,x){var t=document.getElementById(x);if(0==t.length){OK.logging.logger.error("grpJoinReq","no form");return;}var w="";var v=document.getElementById(u).getElementsByTagName("input");for(var s=1;s<v.length;s++){if(v[s].checked){w+=v[s].value+";";}}var y=t["st.layer.ids"];if(!y){OK.logging.logger.error("grpJoinReq","no ids input in form");return;}y.value=w;var r=t.submitBtn;if(!r){OK.logging.logger.error("grpJoinReq","no submit button in form");return;}r.click();}};function i(v,s){var u=document.getElementById("modal_box");k(u,v,s);var r=document.getElementById("paymentWizardInstant");k(r,v,s);var t=document.getElementById("pmntWzrdCtr").getElementsByTagName("iframe")[0];k(t,v,s);}function k(s,t,r){if(s){s.style.width=t+"px";s.style.height=r+"px";}}var f=(function(){var r=function(s){OK.loader.use("EasyXDMJs",function(){swfParam=s.substring(0,s.lastIndexOf("/"))+"/easyxdm.swf";window.remote=new easyXDM.Rpc({remote:s,swf:swfParam,container:"pmntWzrdCtr",props:{width:"100%",height:"100%",frameborder:"0",scrolling:"no"},onReady:function(){}},{local:{resizeWizard:function(u,t){var v=u.split(",");i(v[0],v[1]);},layerFeedback:function(t){window.__PMNT__ShowLayerFeedback(t);},showPromo:function(t){window.__PMNT__ShowPromoLayer(t);},closePaymentCallback:function(t){window.__PMNT__CloseLayerCallback(t);},closePaymentLayer:function(t){window.__PMNT__CloseLayer(t);},showTrackSelection:function(v,t,u){var w=v.split(",");window.__PMNT__ShowTrackSelectionLayer(w[0],w[1],w[2]);},callSuccessSendPresentCallback:function(t){window.__PMNT__CallSuccessSendPresentCallback(t);}}});});};return{init:r};}());var a=function(s,r){var t=document.getElementById(s);if(t!=null){if(t.outerHTML){t.outerHTML=r;}else{t.innerHTML=r;}}};var b=function(r,s){if(typeof s=="undefined"){s=r;}var u=$("#"+s+"Prompt");var v=$("#"+s+"PromptDscr");if(u){var t=$("#"+r);var w="form_i__focused";t.focus(function(){if(!u.hasClass(w)&&v.html().length>0){u.addClass(w);}}).blur(function(){u.removeClass(w);});}};var o=function(r){if(r){window.setTimeout(function(){var t=document.activeElement;if(!t||(!t.type&&!t.href)){var s=document.getElementById(r);if(s){try{s.focus();}catch(t){}}}},100);}};var h=function(s,r){document.getElementById("appMain_DivObject")[s](r);};return{disableButtonOnCheckbox:q,disableSelectOnCheckbox:m,onTextAreaValueChange:p,onRelationshipMenuLoad:l,onCountdownTextareaValueChange:d,createMoreFileInputs:n,datepicker:g,actionmenu:c,showNotification:e,xdm:f,groupJoinRequestsUtil:j,streamFlash:a,addErrorClassOnFocus:b,setFocusOnReady:o,executePromoCallback:h};}());(function(a){var b=a.getElementById("topPanel");if(b){OK.addEvent(b,"click",function(f){var d=(f.target||f.srcElement),c=d.tagName.toLowerCase();if(OK.Layers.stack.length&&c!="input"&&c!="a"&&d.id!=="pointerOverlay"){OK.Layers.unregisterLast("topPanelClick");}});}})(document);OK.showOnlineUsers=function(g,e,a){var k=document.getElementById("online-fr"),j;if(!k){return;}if(typeof OK.getCurrentDesktopModelId!="undefined"&&a){var f=OK.getCurrentDesktopModelId(),c=a.split(",");if(f){var d=0;while(c[d]){if(c[d]==f){OK.css.display(k,false);break;}d++;}}}if(typeof OK.showOnlineUsers.doResize!="undefined"){OK.showOnlineUsers.doResize();}if(OK.css.hasClass(document.body,"fcofw")){var h=OK.showOnlineUsers.top,b=document.getElementById("online-fr_block");if(h&&b){b.style.top=h+"px";}}else{if(OK.showOnlineUsersTimer){clearInterval(OK.showOnlineUsersTimer);}OK.showOnlineUsersTimer=setInterval(function(){if(OK.Layers.isAnyLayerOpened()){return;}var i=55*g+5;var l=document.getElementsByClassName("online-fr_list");if(l){k.classList.add("__push");l[0].setAttribute("style","max-height:"+i+"px");setTimeout(function(){if(k&&l){l[0].removeAttribute("style");k.classList.remove("__push");}},e);}clearInterval(OK.showOnlineUsersTimer);},1000);}};OK.wb={hbc:function(){var a=$("#mwbCid");var b=function(c){a.empty();if("open"==c||"listen"==c||"play"==c){if("play"==c){odklMusic.openAndLaunchMusicPlaying();}else{odklMusic.openMusic();}}$.post("/dk?cmd=MWBAHBlock&st.action="+c);};a.click(function(d){var c=$(d.target);if(c.data("action")){b(c.data("action"));}return false;});}};OK.sm={bind:function(e,d,a,b,c){OK.loader.use(["jQuery"],function(){var f=$("#"+e).parent().attr("id"),k=null,i=null,g=false;function j(o){if(k){clearTimeout(k);}else{if(!i&&!$("#"+e).hasClass("sc-menu__hidden")){i=setTimeout(function(){i=null;var p=$("#"+e);var q=$("#"+f);if(q.length){p.css({top:"",left:""}).removeClass("sc-menu__top").addClass("sc-menu__hidden");q.append(p);q=null;p.trigger("close.sm");}else{p.remove();}},a);}}k=null;}function n(A){var t,w;if(k){clearTimeout(k);k=null;}$(document.body).one("touchstart",j);var C=$(A.currentTarget);if(!C.hasClass("shortcut-wrap")){var q=C.find(".card_wrp:first");if(q.length){C=q;}else{if((q=C.children("img:first")).length){C=q;}else{if((q=C.closest(".card_wrp")).length){C=q;}}}}var F=C.offset(),o=C.outerHeight(true),x=C.outerWidth(true);var E=$("#hook_Block_MainContainer"),u=E.offset();u.scrollTop=E.scrollTop();u.scrollLeft=E.scrollLeft();F.bottom=F.top+o;F.viewTop=F.top-u.top;var G=$("#"+e);G.trigger("show.sm");E.append(G);t=G.find(".__loading");w=t.attr("data-process-url");if(t.size()>0&&w&&w.length>0){function y(H){if(H&&H.length>0){t.removeClass("__loading");}OK.logging.logger.success("share.likes.async","ok");}function v(){OK.logging.logger.error("share.likes.async","fail");}var r=$.ajax({type:"POST",url:w,data:{"gwt.requested":window.pageCtx.gwtHash},headers:{TKN:OK.tkn.get()}});r.done(function(K,M,L){var H=K.split(OK.navigation.SPLITER),J=L.getResponseHeader(OK.navigation.HEADER).split(",");for(var I=0;I<H.length;I++){if(J[I]){OK.hookModel.setHookContent(J[I],H[I]);}}y(K);});r.fail(function(){v();});}var z=G.outerHeight(true),D=G.outerWidth(true);var B=F.viewTop,p=OK.util.getDocumentScrollYPos();if($(window).height()-(F.bottom-p)<G.outerHeight(true)){G.addClass("sc-menu__top");B+=u.scrollTop-G.outerHeight(true);}else{G.removeClass("sc-menu__top");B+=o+u.scrollTop;}G.css("top",Math.round(B)+"px");var s=F.left+((x-D)/2);if(s+D>=$(window).width()){s=$(window).width()-D-u.left+u.scrollLeft-1;}else{if(s<=0){s=u.scrollLeft+1;}else{s+=u.scrollLeft;}}G.css("left",Math.round(s)+"px");G.removeClass("sc-menu__hidden");$("#"+f).append("<div/>");}function h(o){if(i){clearTimeout(i);i=null;}else{if(!k&&$("#"+e).hasClass("sc-menu__hidden")){g=true;k=setTimeout(function(){k=null;n(o);},d);}else{o.stopPropagation();}}}$("#"+e).hover(function(o){if(i&&$("#"+f).closest("body").length){clearTimeout(i);i=null;}},j).find("a[data-volatile!='true']").click(function(o){if(true===i){i=null;}j(o);});$("#"+f).prev().hover(h,j);if(b){$("#"+f).prev().click(n);}if($(document.body).hasClass("touch")){var l=$("#"+e).bind("touchstart",function(o){if(!i){i=true;}});var m=$("#"+f).prev().bind("touchstart",h).find("a").first()[0];if(m){m.addEventListener("click",function(o){if(g){o.preventDefault();o.stopPropagation();}g=false;},true);}m=null;}$(document).bind("touchmove scroll",function(o){if(k){clearTimeout(k);k=null;}else{g=false;}i=null;});if(c){n({currentTarget:$("#"+f).prev()});}});}};OK.hideFeed=function(a){var b=document.getElementById(a);if(!b){return;}if(OK.css.hasClass(b,"feed-i__first")&&b.nextSibling){OK.css.addClass(b.nextSibling,"feed-i__first");}OK.css.display(b,0);};(function(){var o=".modal_overlay, .modal-new_close_ovr, .pl_shadow, .layer_ovr, .ic_close, #hook_Block_PromoMainLayer .layerPanelClose, .js-close-layer";var f=[],k;var l=[];var p=1;var n=function(){l=[];};var q=function(x){p=x;};var b=function(x){return x.replace(/st\.(fwd|layer\.direction)\=.*?(&|$)/g,"");};var i=function(y){if(p<=1){return;}y=b(y);l.push({link:y});var x=l.length-p;if(x>0){l.splice(0,x);}};var t=function(x){if(p<=1||l.length==0){return;}x=b(x);l[l.length-1]={link:x};};var s=function(x,z){if(l.length==0){return;}var y=l[l.length-1].link.indexOf("?")>=0?"&":"?";y+="st.fwd=";x=encodeURIComponent(x);if(z){y+="on&st.lastelem="+x;}else{y+="off&st.firstelem="+x;}l[l.length-1].attrs=y;};var j=function(){if(p<=1||l.length==0){return null;}l.splice(l.length-1,1);if(l.length==0){return null;}var y=l[l.length-1];var x=y.link;if(y.attrs){x+=y.attrs;}l.splice(l.length-1,1);if(typeof navigateOnUrlFromJS!=="undefined"){navigateOnUrlFromJS(x);}else{require(["OK/PopLayerPhoto"],function(z){z.handleOnNavigate(x);});}};var a=function(E,A,D,x,C,F){OK.loader.execRequire("OK/ToolbarGrowl",function(G){G.hideAll();});D=D||null;x=x||false;C=C||$.noop;F=F||null;var y={id:E,deactivateFn:A,hookInstance:D,preventCloseOnEsc:x,keyHandler:C,redirectAfterClose:F};var z=false;for(var B=0;B<f.length;B++){if(f[B].id==y.id){z=true;f.splice(B,1);OK.logging.logger.success("layerManager","reRegister",y.id);}}f.push(y);if(f.length==1&&!z){w();}m();OK.logging.logger.success("layerManager","register",y.id);};var g=function(x){if(f.length){if(!f[f.length-1].preventCloseOnEsc){var y=f.pop();if(y){c(y);if(!f.length){e();}m();if(y.redirectAfterClose!==null){OK.navigation.redirect(y.redirectAfterClose);}OK.logging.logger.success("layerManager","unregister",y.id);OK.logging.logger.success("layerManager",x,y.id);}else{OK.logging.logger.success("layerManager","popFailed");}}else{OK.logging.logger.success("layerManager","escDisabledForLayer",f[f.length-1].id);}}else{OK.logging.logger.success("layerManager","stackEmpty");}};var m=function(){var y=!f.length||(f.length==1&&(f[0].id=="posting_form"||f[0].id=="video_player"));var A=(f.length==1&&f[0].id=="modal_hook");if(A){var z=document.getElementById("hook_Modal_popLayerModal");if(z&&OK.css.hasClass(z,"layer__disabled")){y=true;}}var x=document.getElementsByTagName("html")[0];x.classList[y?"remove":"add"]("oh");};function d(){var x=OK.hookModel.getHookById("ForthColumnTopBannerInner");if(x){x.handle();}}var w=function(){OK.loader.use(["jQuery"],function(){var x=$("body");x.on("click.popLayers",o,function(y){g("shadowClick");y.stopImmediatePropagation();}).on("keydown.popLayers",function(y){var z=f[f.length-1];if(z){z.keyHandler.call(this,y);}if(y.keyCode===27&&!k){k=true;g("esc");y.preventDefault();y.stopPropagation();}}).on("keyup.popLayers",function(y){k=false;if(y.keyCode===27){y.preventDefault();}y.stopPropagation();});});d();};var e=function(){OK.loader.use(["jQuery"],function(){k=false;$("body").off(".popLayers");});require(["OK/ToolbarGrowl"],function(x){x.showAny();});d();if(require.defined("OK/GoRec")){require("OK/GoRec").notify();}};var c=function(x){x.deactivateFn.call(x.hookInstance);};var u=function(z){var y;for(var x=0;x<f.length;x++){if(f[x].id==z){y=f.splice(x,1);OK.logging.logger.success("layerManager","unregister",z);}}if(!y){OK.logging.logger.success("layerManager","unregisterLayerNotFound",z);}if(!f.length&&y){e();}m();};var r=function(){var y=f.length;for(var x=y;x>0;x--){g("unregisterAll");}};var h=function(){return f.length!=0;};var v=function(z){if(f){for(var y=0;y<f.length;y++){var x=f[y];if(x.id==z){return true;}}}return false;};OK.Layers={register:a,remove:u,isAnyLayerOpened:h,isLayerOpened:v,unregisterAll:r,unregisterLast:g,stack:f,push:i,pop:j,changeAttrs:s,clear:n,replace:t,setMaxSize:q};if(OK.historyManager.isHistorySupported()&&!window.onpopstate){window.onpopstate=function(x){if(x.state){OK.Layers.unregisterAll();}};}})();OK.resize=function(){OK.setContentWidth();};(function(){if(document.getElementById("sc")!=null){var d=OK.scrollBar.width;var b=document.createElement("style");var a=".fake-toolbar {width: "+d+"px}.scroll-right-indent { right: "+d+"px !important; }.scroll-right-margin { margin-right: "+d+"px !important; }";var c=document.getElementsByTagName("head")[0];if(!OK.util.isIEMetro()){a+="html.oh #hook_PopLayer_popLayer, html.oh .topPanel, html.oh .modal, html.oh .scroll-modal-indent {border-right:"+d+"px transparent solid}";}c.appendChild(b);if(b.styleSheet){b.styleSheet.cssText=a;}else{var e=document.createTextNode(a);b.appendChild(e);}}})();OK.passAdminRights=function(){function a(e){var d=document.getElementById("hook_FormButton_button_pass_admin_confirm");d.disabled=!e;if(e==true){d.className="button-pro";}else{d.className="button-pro __disabled";}}function c(e){var d=document.getElementById("hook_FormButton_button_pass_admin_confirm");if(e.value.length>0){d.className="button-pro";d.disabled=false;}else{d.className="button-pro __disabled";d.disabled=true;}}function b(){var d,l=this;var j;var e=document.getElementById("smsTimer");var h=document.getElementById("timerWrapper");var m=document.getElementById("resendLink");function f(n){return((10>n)?"0"+n:n);}var k=function(t){var p=t;var r=Math.floor(p/3600);p-=3600*r;var o=Math.floor(p/60);p-=60*o;var q=p;var n=(r>0?f(r)+":":"")+f(o)+":"+f(q);e.innerHTML=n;};var i=function(){document.getElementById("resendLink").style.display="";document.getElementById("timerWrapper").style.display="none";};function g(){k(j);if(j===0){i();clearInterval(d);}j--;}this.start=function(){h.style.display="";m.style.display="none";clearInterval(d);j=parseInt(e.innerHTML);if(j<=0){i();return;}g(j);d=setInterval(g,1000);};}return{Countdown:b,onAgreeClick:a,onSmsFieldChange:c};}();OK.apps={checkUnityInstalled:function(){if(navigator.mimeTypes["application/vnd.unity"]){return true;}else{if(window.ActiveXObject!==undefined){try{var b=new ActiveXObject("UnityWebPlayer.UnityWebPlayer.1");return true;}catch(a){}}}return false;},dup:function(){try{if(this.checkUnityInstalled()){OK.logging.logger.success("appsstats.unity.detected","footer");}OK.logging.logger.success("appsstats.check.unity","footer");}catch(a){OK.logging.logger.success("appsstats.check.unity","error");}}};(function(){var b=0,d=false,c=false,a=document.getElementById("pointerOverlay");function e(){clearTimeout(b);if(!d){OK.css.addClass(a,"__auto");d=true;}b=setTimeout(function(){OK.css.removeClass(a,"__auto");d=false;},200);c=false;}OK.blockHoverStart=function(){if(c){return;}c=true;if(requestAnimationFrame){requestAnimationFrame(e);}};}());var OKCustomJs=OK.customJs;